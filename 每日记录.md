





每日记录

## 2021.03

### 8-12

#### 08

* 办理入职手续
* 配置办公环境
* 熟悉公司流程

#### 09

* 学习了解node.js基础概念及知识
* 学习JS语法

#### 10

* 学习JS语法

#### 11

* 学习git使用
* 学习node相关知识

#### 12

* 熟悉git使用
* 熟悉third-api-service项目

#### 周报

标题：【工作周报】张映辉-后台-公共平台-20210308~20210312

上周主要工作：

1. 学习Node语言规范，了解学习Node开发工具及开发流程。
2. 学习了解Git使用
3. 熟悉third-api-service项目代码

本周工作安排：

1. 修改项目功能

工作总结：

上周主要是在熟悉公司工作流程，配置工作环境，学习Node语言，熟悉项目代码。本周预计根据要求修改项目代码，添加****功能。

### 15~19

1. 熟悉项目代码
2. 增加海外Tiktok渠道，实现海外版tiktok渠道应用注册及广告数据下载



### 22~26

#### 22

* 完成数据报表下载
* 学习了解docker使用

#### 23

* 学习了解docker使用
* 打包代码

#### 24~26

* 增加海外渠道定时更新方法
* 部署上线
* 发现数据库链接断开bug，通过log定位到申请access_tocken是refresh_tocken错误，导致数据库更新时过期时间为空，造成数据库报错，未捕获，造成链接断开。
* 数据更新无内容



### 29~3

#### 29

* 发现数据更新正常，只是有点慢。
* 线下复现refrestocken错误，更新异常捕获逻辑。

## 2021.04

### 20210406~20210409

#### 06

* adsservice增加权限系统

#### 07

* 熟悉dotService项目代码

#### 08 

* 熟悉dotService项目代码

#### 09 

* 熟悉dotService项目代码
* 规范化部署operdot服务
* 增加服务网络代理

### 20120412-15

#### 12

* 部署dotservice服务
* 熟悉项目代码

#### 13

* 熟悉调查问卷代码

#### 14

* 配置资源文件，修改主控服务代码

#### 15

* 修改主控服务代码，问卷上线
* 修改dot项目代码，部署上线

### 20210419-0427

#### 19

* 熟悉项目代码

* 熟悉交叉推广系统代码配置
* adsService增加新功能，不在创建空文件
* 部署海外dot项目

#### 0425

1、系统日志
2、jstack
3、负载情况

1、增加错误日志收集
2、部署recycle

* 部署测试ads服务器
  - [ ] 6点左右导出数据
  - [ ] docker 部署（启动模式需要修改）
  - [ ] 增加打点信息（调用信息）
  - [ ] 

#### 0426

* dot项目增加错误日志收集 增加recycle
* ads增加打点信息

#### 0427

- [x] ads增加锁
- [x] 学习aws使用
- [x] onesdknginx切量
- [x] 规范化game-control docker 不到内网机器上
- [x] docker部署增加用户

## 2021.05

### 20210506-0508

#### 0506

* 测试部署adsService任务锁
* 部署game-control
* 关闭183 184 老dot服务器
* 查出adsService服务器下载缓慢原因

#### 0507

* 部署adsService 解决报错问题
* 部署game-control

#### 0508

* 备份线上ads数据库
* 拷贝到测试数据库
* 本地查找满下载原因
* nginx log问题
* 任务数限制到100

### 0510~0514

#### 0510

- [ ] recycle 限制下设置为邮件报警容量 单位 B
- [ ] nginx log问题
- [x] 任务数限制到100 100耗时326s 50耗时 202 167
- [x] 用户创建问题

#### 0511

- [x] mfctrl 系统login/json 文档
- [x] 部署mfctrl 增加candy
- [x] 重设us-dot-2 recycle
- [x] 重设us-dot-3 recycle

  

#### 0512

- [x] 重设us-dot-1 recycle
- [x] 检查us-dot-3 85原因
- [x] 导数据

#### 0513

- [x] dot增加接收udp功能
- [x] 写dot文档
- [x] candy数据导出准备
- [x] 整理服务器列表

#### 0514

- [x] gateway-2日志处理
- [x] 页面制作
- [x] 域名解析问题（搁置）
- [x] 页面制作
- [x] 写dns相关文档
- [x] 提交mfctrl代码
- [x] user_base表新增三个字段，并支持ctrl login时更新字段。

### 0517~0520

#### 0517

- [x] mfctrl等cf更新数据库后再接入
- [x] 更新海外数据库结构，更新表名

#### 0518

- [x] 导candy数据
- [x] 更新海外ctrl
- [x] 熟悉fcm

#### 0519

- [x] 修改udpController
- [x] 完成pushservice fcm模块代码并测试
- [x] 做适龄html

#### 0520

- [x] ctrl支持candy接入
- [ ] dot部署时增加回收大小配置
- [ ] dot增加内网部署配置文件
- [ ] 规范化部署其他服务，增加配置，端口等

## 2021.06

### 0601-0604

#### 0601

- [x] 写完ctrlbuild脚本
- [x] 部署海外ads_service
- [x] 海外ads_service域名
- [x] dot增加内网部署配置文件
- [ ] 规范化部署其他服务，增加配置，端口等

#### 0602

- [x] 配置candy  login

#### 0603

- [x] 测试海外部署ads能否下载国内数据
- [x] candy测试

#### 0604

- [x] 更新国内dot弹性部署，
- [x] 测试tiktok页面刷新授权

  

### 0607~0611

#### 0607

- [x] candy adjust配置文档
- [x] 更新海外tiktok配置

#### 0608

- [x] 切换国内onesdk
- [x] 启动客服系统项目
- [x] dot项目支持Header 内容收集配置
- [x] 查ads国内下载问题，无5日下载(等一等)



### 0615~0618

#### 0615

- [ ] 更新客服系统jsp
  - [x] 文件上传至本地
- [x] dot项目增加错误日志

#### 0616

- [x] 更新客服系统jsp
  - [x] 文件上传至s3
  - [x] 发送请求
  - [x] 整合

#### 0618

- [x] dot项目增加错误日志
- [x] 查看tcpdump
- [x] 查看服务器占用

### 0621~0625

#### 0621

- [x] 周报
- [x] 整理dot新功能
- [x] 整理问题排查过程记录
- [x] 查看国内dot服务器
- [x] 整理jvm监控指令
- [x] ads授权流程

#### 0622

- [x] 上线客服系统新功能

#### 0623



#### 0624

- [ ] 国内ctrl切换为alb
  - [x] 更新镜像，增加healthcheck接口
    - [x] 做镜像
    - [x] 推镜像
    - [x] 更新服务
  - [x] 创建targetgroup
    - [x] 配置安全组
  - [x] 创建alb
    - [x] 测试
  - [x] 替换域名
    - [x] jelly
    - [x] cake

#### 0625

- [ ] 更新支付系统新功能
- [ ] 配置系统
  - [x] 配置部分本地测试简单类型
  - [ ] 配置部分本地测试实际数据结构
  - [ ] 确定上传服务模式
  - [ ] 完成上传服务代码
  - [ ] 完成上传服务本地测试

### 0628~0702

#### 0629

- [ ] 更新支付系统新功能
- [ ] 配置系统
  - [x] 配置部分本地测试实际数据结构
  - [ ] 确定上传服务模式
  - [ ] 完成上传服务代码
  - [ ] 完成上传服务本地测试

- [ ] 国内ctrl切换为alb

#### 0630

- [ ] 更新支付系统新功能
- [ ] 配置系统
  - [x] 测试cidi脚本
  - [ ] 阅读项目源代码
  - [ ] 确定上传服务模式
  - [ ] 完成上传服务代码
- [ ] 完成上传服务本地测试
- [ ] 国内ctrl切换为alb

## 2021.07

### 0705~0709

#### 0705

- [x] 配置系统
  - [x] 确定上传服务模式
  - [x] 完成上传服务代码
- [x] 完成上传服务本地测试
- [x] 国内ctrl切换为alb
- [ ] 线下配置服务结构搭建
  - [ ] 至少3个分支：dev；prod;prod-abroad
  - [ ] 存储结构：
    * oper_config/
      * oper_config_last_dev
      * oper_config_last_prod
      * oper_config_last_prod_abroad
      * dev/
        * ....
      * prod/
        * ....
      * prod_abroad/
        * ...
- [ ] 完成配置系统线上部署
- [ ] 完成ctrl服务配置
  - [ ] 确定数据库结构
  - [ ] 确定海外能否访问数据
  - [ ] 熟悉流程
  - [ ] 确定方案
  - [ ] 修改代码

#### 0706

- [ ] 线下配置服务结构搭建
  - [ ] 至少3个分支：dev；prod;prod-abroad
  - [ ] 存储结构：
    * oper_config/
      * oper_config_last_dev
      * oper_config_last_prod
      * oper_config_last_prod_abroad
      * dev/
        * ....
      * prod/
        * ....
      * prod_abroad/
        * ...
- [ ] 完成配置系统线上部署
- [x] 完成ctrl服务配置
  - [x] 确定数据库结构
  - [x] 确定海外能否访问数据
  - [x] 熟悉流程
  - [x] 确定方案
  - [x] 修改代码

- [x] dot服务器支持check_time

#### 0707

- [x] 配置线下及线上配置服务

#### 0708

- [x] 上线打点服务新接口
- [x] xsd匹配简单json表达式

#### 0709

- [ ] 梳理国内海外loginConfig

### 0726~0730

#### 0726

- [x] 完成dev配置系统
- [x] dev配置上线

#### 0727

- [x] 写node s3组件
- [x] lf4g缓存配置 不太用调整
- [x] ctrl改内网ip

#### 0728

- [x] 改dot 启动配置 虚拟机调优
- [ ] config
  - [x] 海外要写到海外分桶
  - [ ] 写国内配置
  - [x] 写海外配置
  - [x] 更新海外镜像

#### 0729

- [x] 改html
- [x] config
  - [x] 海外切量
  - [x] true false
  - [x] 更新国内镜像
  - [x] 国内切量

#### 0730

- [x] 部署html

- [x] 写dot文档

- [x] 写config文档

- [ ] 新游戏支持
  - [x] ctrl修改
  - [x] dot修改
  - [x] 线下部署
  - [x] 线下测试
  
    

## 2021.08

### 0802~0806

#### 0802

- [x] 查mf ctrl bug
- [x] 更新dot
- [ ] 部署配置服务
  - [x] 写文档
  - [x] 分支
  - [x] 权限

#### 0803

- [x] 停181
- [x] 新游戏支持
  - [x] dot线上部署
    - [x] 1
    - [x] 2
    - [x] 3
    - [x] 4
  - [x] ctrl线上部署
- [ ] 支付系统
- [ ] 日志监控
- [x] JVM监控调优
- [ ] 部署配置服务
  - [ ] whoami
  - [ ] cicd

